repo,test_patch,problem_statement,FAIL_TO_PASS,PASS_TO_PASS,language
rubocop/rubocop,"diff --git a/spec/rubocop/cli_spec.rb b/spec/rubocop/cli_spec.rb
index e82746481efc..0f081ff0b428 100644
--- a/spec/rubocop/cli_spec.rb
+++ b/spec/rubocop/cli_spec.rb
@@ -2166,6 +2166,51 @@ def method(foo, bar, qux, fred, arg5, f) end #{'#' * 85}
     end
   end
 
+  describe '--display-only-correctable' do
+    it 'returns 0 if there are no offenses shown' do
+      create_file('.rubocop.yml', <<~YAML)
+        AllCops:
+          SuggestExtensions: false
+      YAML
+      create_file('example.rb', <<~RUBY)
+        # frozen_string_literal: true
+
+        @@var = 0
+      RUBY
+      expect(cli.run(['--display-only-correctable', 'example.rb'])).to eq(0)
+      expect($stderr.string).to eq('')
+      expect($stdout.string).to eq(<<~RESULT)
+        Inspecting 1 file
+        .
+
+        1 file inspected, no offenses detected
+      RESULT
+    end
+  end
+
+  describe '--display-only-safe-correctable' do
+    it 'returns 0 if there are no offenses shown' do
+      create_file('.rubocop.yml', <<~YAML)
+        AllCops:
+          SuggestExtensions: false
+      YAML
+      create_file('example.rb', <<~RUBY)
+        # frozen_string_literal: true
+
+        if foo and bar
+        end
+      RUBY
+      expect(cli.run(['--display-only-safe-correctable', 'example.rb'])).to eq(0)
+      expect($stderr.string).to eq('')
+      expect($stdout.string).to eq(<<~RESULT)
+        Inspecting 1 file
+        .
+
+        1 file inspected, no offenses detected
+      RESULT
+    end
+  end
+
   if RUBY_ENGINE == 'ruby' && !RuboCop::Platform.windows?
     describe 'profiling' do
       let(:cpu_profile) { File.join('tmp', 'rubocop-stackprof.dump') }
","Exit status is inconsistent with the output when --display-only-correctable is on
## Expected behavior

When Rubocop responds with ""no offenses detected"", I expect exit status to be 0 for CI to pass.
This is not always the case when  --display-only-correctable flag is on. 

## Actual behavior

When there are uncorrectable issues in the codebase and no correctable ones, `rubocop --display-only-correctable` output is green, ""no offenses detected"" is reported, but the status is 1 causing CI to fail.

## Steps to reproduce the problem

```
echo ""# frozen_string_literal: true\n\n@@var = 0"" > temp.rb
rubocop --display-only-correctable temp.rb; echo ""Return code: $?""
```
> sh-3.2$ rubocop --display-only-correctable temp.rb; echo ""Exit status: $?""
> Inspecting 1 file
> .
> 1 file inspected, no offenses detected
> Exit status: 1

## RuboCop version

**1.67.0**
",['returns 0 if there are no offenses shown'],"['`Lint/Syntax` must be enabled when `DisabledByDefault: true`', '`Lint/Syntax` must be enabled when `Lint` is given `Enabled: false`', '`Lint/Syntax` must be enabled when disabled by directive all comment', '`Lint/Syntax` must be enabled when disabled by directive comment', '`Lint/Syntax` must be enabled when disabled by directive department comment', '`Lint/Syntax` severity `fatal` cannot be changed by configuration', '`Naming/FileName` must be be disabled for global offenses', '`Naming/FileName` must be be enabled if directive comment is on unrelated line', 'accepts indented_internal_methods style indentation', 'acts as if the key/value pair was removed', 'allows the default configuration file as the -c argument', 'can be configured to merge a parameter that is a hash', 'can be configured to override a parameter that is a hash in a special case', 'can be configured with option to disable a certain error', 'can be configured with project config to disable a certain error', 'can disable all cops in a code section', 'can disable all cops on a single line', 'can disable parser-derived offenses with warning severity', 'can disable selected cops in a code section', 'can disable selected cops on a single line', 'can disable selected cops on a single line but prints a warning', 'can exclude a typical vendor directory', 'can exclude a vendor directory indirectly', 'can exclude a vendor directory with an erroneous config file', 'can exclude directories relative to .rubocop.yml', 'can have different config files in different directories', 'can process a file with an invalid UTF-8 byte sequence', 'can use an alternative max line length from a config file', 'cannot disable Syntax offenses', 'causes an offense to be reported', 'checks a Rakefile but Style/FileName does not report', 'checks a given file with faults and returns 1', 'creates cpu profile file', 'creates memory profile file', 'displays a warning', 'displays an error message to stderr', 'displays cop names if DisplayCopNames is false', 'displays style guide URLs if DisplayStyleGuide is true', 'does not consider Include parameters in subdirectories', 'does not crash', 'does not crash and reports an offense', 'does not create profile files by default', 'does not read files in excluded list', 'does not register an offense for `Lint/RedundantCopDisableDirective`', 'does not register any offenses for an empty file', 'does not report RedundantCopDisableDirective offenses', 'does not suggest `1 offense autocorrectable` for `Style/StringLiterals`', 'does not trigger RedundantCopDisableDirective due to lines moving around', 'does not use parallel inspection', 'excludes the vendor directory by default', 'exits with 2', 'exits with error code', 'fails when a configuration file has invalid YAML syntax', 'fails when a configuration file specifies an invalid Severity', 'fails with an error message', 'finds a file with no .rb extension but has a shebang line', 'finds files included through inheritance', 'finds included files', 'generate a .rubocop.yml file', 'handles relative excludes correctly when run from project root', 'ignores config file', 'ignores excluded files', 'inherits relative excludes correctly', 'is an invalid configuration', 'matches included/excluded files correctly when . argument is given', 'only reads configuration in explicitly included hidden directories', 'overrides configuration of AllCops/StyleGuideCopsOnly', 'prefers a config file in ancestor directory to another in home', 'prints a warning for an unrecognized configuration parameter', 'prints an error for an unrecognized cop name in .rubocop.yml', 'prints an error message for an unrecognized EnforcedStyle', 'prints the error and exists with code 2', 'registers an offense for Parser warnings', 'registers an offense for a syntax error', 'registers offense for normal indentation in class', 'registers offense for normal indentation in module', 'reports an offense', 'reports an offense when explicitly enabled on part of a file', 'returns 0', 'returns 130', 'returns a 0 code', 'returns a 0 code but does not list offenses', 'returns a 1 code', 'runs all cops that are enabled in default configuration', 'runs cops for rules regardless of any link to the style guide', 'runs cops for rules that link to a style guide', 'runs only the cop configured in .rubocop.yml', 'runs without errors for an unrecognized cop name in .rubocop.yml and `--ignore-unrecognized-cops` option is given', 'shows an error if the input file cannot be found', 'skips cops that have no link to a style guide', 'still returns 0', 'uses parallel inspection', 'uses parallel inspection when correcting the file', 'uses the DefaultFormatter if another formatter is not specified', 'works when `AllCops:Exclude` is empty', 'works when a configuration file passed by -c specifies Exclude with regexp', 'works when a configuration file passed by -c specifies Exclude with strings', 'works when a configuration file specifies Severity for Metrics/ParameterLists and Layout', 'works when a configuration file specifies Severity for Metrics/ParameterLists and Layout/LineLength', 'works when a cop that others depend on is disabled']",Ruby
