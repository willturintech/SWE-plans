repo,test_patch,problem_statement,FAIL_TO_PASS,PASS_TO_PASS,language
laravel/framework,"diff --git a/tests/Database/DatabaseEloquentInverseRelationTest.php b/tests/Database/DatabaseEloquentInverseRelationTest.php
index 100921ea18da..ae76ca07f81e 100755
--- a/tests/Database/DatabaseEloquentInverseRelationTest.php
+++ b/tests/Database/DatabaseEloquentInverseRelationTest.php
@@ -272,6 +272,27 @@ public function testSetsGuessedInverseRelationBasedOnForeignKey()
         $this->assertSame('test', $relation->getInverseRelationship());
     }
 
+    public function testOnlyHydratesInverseRelationOnModels()
+    {
+        $relation = m::mock(HasInverseRelationStub::class)->shouldAllowMockingProtectedMethods()->makePartial();
+        $relation->shouldReceive('getParent')->andReturn(new HasInverseRelationParentStub);
+        $relation->shouldReceive('applyInverseRelationToModel')->times(6);
+        $relation->exposeApplyInverseRelationToCollection([
+            new HasInverseRelationRelatedStub(),
+            12345,
+            new HasInverseRelationRelatedStub(),
+            new HasInverseRelationRelatedStub(),
+            Model::class,
+            new HasInverseRelationRelatedStub(),
+            true,
+            [],
+            new HasInverseRelationRelatedStub(),
+            'foo',
+            new class() {},
+            new HasInverseRelationRelatedStub(),
+        ]);
+    }
+
     public static function guessedParentRelationsDataProvider()
     {
         yield ['hasInverseRelationParentStub'];
@@ -361,4 +382,9 @@ public function exposeGuessInverseRelation(): string|null
     {
         return $this->guessInverseRelation();
     }
+
+    public function exposeApplyInverseRelationToCollection($models, ?Model $parent = null)
+    {
+        return $this->applyInverseRelationToCollection($models, $parent);
+    }
 }
","Issue with new chaperone feature when utilizing ""pluck""
### Laravel Version

11.22

### PHP Version

8.3

### Database Driver & Version

_No response_

### Description
This relates to the new feature #51582 
There seems to be an issue when utilizing pluck on a model relationship. An error occurs on this line in

```php
protected function applyInverseRelationToCollection($models, ?Model $parent = null)
    {
        $parent ??= $this->getParent();

        foreach ($models as $model) { 
            $this->applyInverseRelationToModel($model, $parent);
        }

        return $models;
    }
``` 
src/Illuminate/Database/Eloquent/Relations/Concerns/SupportsInverseRelations.php

The model being passed to applyInverseRelationToModel is an integer and not the full model.

### Steps To Reproduce

in this case I am trying to query and get the ""Comment"" ids from a Post model
```php
$BlogCommentIDs = $Post->Comments()->pluck( 'id' )->all();
```

the relationship in the Post Model
```php
 /**
     * @return \Illuminate\Database\Eloquent\Relations\HasMany
     */
    public function Comments() {
        return $this->hasMany( Comment::class, 'post_id' )->orderBy( 'comment_order', 'asc' )->chaperone('Post');
    }
```

the inverse relationship in the Comment Model
```php
/**
     * @return \Illuminate\Database\Eloquent\Relations\BelongsTo
     */
    public function Post() {
        return $this->belongsTo( Post::class, 'post_id' );
    }
```

in theory you can fix what im trying to do by changing the line to, but that shouldnt be necessary by the end-developer
```php
$BlogCommentIDs = $Post->Comments()->withoutChaperone()->pluck( 'id' )->all();
```


",['Database Eloquent Inverse Relation > Only hydrates inverse relation on models'],"['Database Eloquent Inverse Relation > Builder callback is not applied when inverse relation is not set', 'Database Eloquent Inverse Relation > Builder callback is not set if inverse relation is empty string', 'Database Eloquent Inverse Relation > Builder callback is not set if inverse relationship does not exist', 'Database Eloquent Inverse Relation > Without inverse method removes inverse relation', 'Database Eloquent Inverse Relation > Builder callback is applied when inverse relation is set', 'Database Eloquent Inverse Relation > Builder callback applies inverse relation to all models in result', 'Database Eloquent Inverse Relation > Inverse relation is not set if inverse relation is unset', 'Database Eloquent Inverse Relation > Provides possible inverse relation based on foreign key', 'Database Eloquent Inverse Relation > Provides possible recursive relations if related is the same class as parent', 'Database Eloquent Inverse Relation > Guesses inverse relation based on parent with data set #0', 'Database Eloquent Inverse Relation > Guesses inverse relation based on parent with data set #1', 'Database Eloquent Inverse Relation > Guesses inverse relation based on parent with data set #2', 'Database Eloquent Inverse Relation > Guesses possible inverse relation based on foreign key', 'Database Eloquent Inverse Relation > Guesses recursive inverse relations if related is same class as parent', 'Database Eloquent Inverse Relation > Sets guessed inverse relation based on parent with data set #0', 'Database Eloquent Inverse Relation > Sets guessed inverse relation based on parent with data set #1', 'Database Eloquent Inverse Relation > Sets guessed inverse relation based on parent with data set #2', 'Database Eloquent Inverse Relation > Sets recursive inverse relations if related is same class as parent', 'Database Eloquent Inverse Relation > Sets guessed inverse relation based on foreign key']",PHP
